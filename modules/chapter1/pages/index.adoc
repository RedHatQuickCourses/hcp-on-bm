= Deploy BareMetal Node

////
Video segments:
https://drive.google.com/file/d/1x8WS_DQjKyOW_o3T7_WM9xXAe4rLgMWt/view?usp=sharing

12:10::
Prepare the bare metal node.

16:34::
////

This lab describes how to prepare an AWS environment, using the AWS console, containing a single bare metal instance that you will later access using SSH and also VNC.

1. On the AWS Web console, switch to your preferred region, preferably the one closest to you. If unsure, use `us-east-1`.
+
image::s2-fig-1.jpg[]

2. From within the AWS console, search for VPC in the search bar and select VPC.
+
image::s2-fig-2.jpg[]

3. Click on “Create VPC”.
+
image::s2-fig-2b.jpg[]
+
Fill in the form as follows:
+
image::s2-fig-2c.jpg[]
.. Select “VPC and more”

.. Give a name

.. Select “1” under “Number of Availability Zones (AZs)”

.. Select “0” under “Number of Private Subnets”

.. Select "None" under "NAT Gateways ($)"
+
WARNING: It won't work exactly as is in the screen shot, but throw an error: *NAT Gateway needs a private subnet to configure outbound traffic*. There is no need for a NAT gateway because the instance has a public IP address.

.. Then click on “Create VPC”
+
image::s2-fig-3.jpg[]

4. Verify that the VPC and associated resources are created successfully and there are no errors.
+
image::s2-fig-4.jpg[]

5. In the search window, type “EC2” and click on EC2.
+
image::s2-fig-5.jpg[]

.. Click on “Launch Instance” on the next page.
+
image::s2-fig-6.jpg[]

.. Give a name for the EC2 Instance.

.. Select “Red Hat” under “Application and OS Images (Amazon Machine Image)”
+
WARNING: It is expected to work using the default RHEL10 AMI, but all testes were performed by selecting a RHEL9 AMI.

.. Select “c5.metal” under “Instance Type”
+
image::s2-fig-7.jpg[]

6. In the KeyPair section, click on “Create new KeyPair”
+
image::s2-fig-8.jpg[]

.. Give a Name and click “Create Key Pair”
+
image::s2-fig-9.jpg[]

.. Save the automatically downloaded keypair in your local system with a permission of 600.
+
[source,subs="verbatim,quotes"]
--
$ chmod 600 _<path to the keypair>_
--

7. Click “Edit” next to “Network Settings” and fill in the panel as follows:
+
image::s2-fig-10.jpg[]

.. Select “Enable” in “Auto-assign public IP”

.. Select “My IP” for “Source type” for ssh under Inbound Security Group Rules

.. Click “Add Security Group Rule”

.. Specify “Port Range” to “5999”

.. Select “My IP” for “Source type” for the second security group rule also.

8. Under “Configure Storage”, change the size of the disk to 750GiB
+
image::s2-fig-11.jpg[]

9. Then click on “Launch Instance” from the Summary page on the right side.
+
image::s2-fig-12.jpg[]
+
WARNING: If you get an AWS error stating there is no sufficient c5.metal capacity, try on a different availability zone.

10. Wait a few monents until your AWS instance is up and running, before continuing with the next lab.